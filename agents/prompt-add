{
"instruction": "ADD\_SHOW\_META\_FROM\_MINIMUM\_FIELDS",
"description": "Single-shot prompt that accepts the 3 required inputs, validates them, enriches event meta from authoritative sources, derives search keys/facets, and returns a ready-to-save meta.json. Also returns a suggested save path and an admin preview of the expected folder/files for the show.",
"required\_inputs": \[
"official\_link",
"official\_name",
"official\_start\_date"
],
"id\_policies": {
"show\_uid": "Slugify the official\_name in full (lowercase, spaces and slashes to hyphens, remove disallowed characters). Example: 'Platinum Performance/USHJA International Hunter Derby Championship' → 'platinum-performance-ushja-international-hunter-derby-championship'.",
"event\_uid": "{show\_uid}*{yyyy-mm} derived from official\_start\_date.",
"slug": "Same as show\_uid for path consistency.",
"rid": "Opaque ULID/UUID for internal joins; never changes once assigned."
},
"file\_naming": {
"meta\_path\_template": "/shows/{show\_uid}/events/meta.json",
"download\_name\_template": "meta-{show\_uid}.json",
"admin\_root\_template": "/shows/{show\_uid}/"
},
"admin\_scaffold": {
"root": "/shows/{show\_uid}/",
"paths": \[
"/shows/{show\_uid}/show\.json",
"/shows/{show\_uid}/aliases.json",
"/shows/{show\_uid}/evergreen/stay.json",
"/shows/{show\_uid}/evergreen/dine.json",
"/shows/{show\_uid}/evergreen/extras.json",
"/shows/{show\_uid}/evergreen/temps-deltas-now\.json",
"/shows/{show\_uid}/events/meta.json",
"/shows/{show\_uid}/events/reviewed/introcloser.json",
"/shows/{show\_uid}/events/reviewed/overrides.json",
"/shows/{show\_uid}/events/assembled/blog.json"
],
"notes": "Evergreen files are venue-stable and reused year to year. 'events/meta.json' holds the current edition only; no dated folders. 'reviewed' contains edition-specific overrides and intro/closer. 'assembled' contains blended outputs."
},
"prompt\_template": "ROLE: You are an operations editor for Clear Round Travel.\nINPUTS: official\_link={official\_link}, official\_name={official\_name}, official\_start\_date={official\_start\_date}.\nGOALS: Validate inputs; enrich event meta from authoritative sources; derive IDs and search fields; return a valid JSON document matching 'output\_schema'.\nSTEPS:\n1) VALIDATE\n- Confirm official\_link is HTTPS, resolves, and is the organizer’s canonical event page.\n- Cross-check on-page title against official\_name; if it differs, keep the provided official\_name as canonical for this edition and note the discrepancy in meta.notes.\n- Validate official\_start\_date (ISO YYYY-MM-DD).\n2) ENRICH (authoritative sources only; organizer page first, venue site second)\n- official\_end\_date\n- venue\_name, venue\_address, venue\_city, venue\_state (USPS), venue\_zip\n- venue\_coords: WGS84 decimal lat/lon for the main competitor entrance; include coordinate\_source and optionally google\_place\_id, maps\_url when confidently known.\n- timezone (IANA) from venue location\n- sources: concise list of the actual URLs used\n- notes: short clarifications (e.g., “end date inferred”, “address uses competitor GPS format”)\n3) IDS\n- show\_uid: slugify official\_name in full (retain sponsor words).\n- event\_uid: {show\_uid}*{yyyy-mm} from official\_start\_date.\n- slug: same as show\_uid.\n- rid: generate an opaque ULID/UUID.\n4) DERIVED\n- yyyymm (YYYY-MM), month\_name, season (NA: winter=Dec–Feb, spring=Mar–May, summer=Jun–Aug, fall=Sep–Nov), status\_window (upcoming|active|past vs today).\n5) SEARCH\n- auto\_keys: normalized tokens from official\_name, venue, city/state, airports, discipline/rating, year/month.\n- curated\_keys: leave empty unless a widely accepted nickname is obvious (e.g., “derby finals”).\n- facets: discipline, rating, state (USPS), region (house map if known), airports\_primary (1–3 IATA), season.\n6) ALIASES\n- curated: include 'official' (the styled full name) and optional 'short' if universally used; otherwise empty.\n7) OPS FLAGS\n- Initialize: needs\_meta\_refresh=false, needs\_research=false, needs\_blog=false, stale\_reason=null, last\_ops\_check=today.\n8) QUICK NOTES\n- Add 1–5 short bullets for any provisional/assumed items.\n9) SUGGESTED SAVE & ADMIN PREVIEW\n- Provide suggested\_save.file\_path and download\_name using 'file\_naming'.\n- Provide an admin\_preview\.paths array by substituting {show\_uid} into 'admin\_scaffold.paths'.\nOUTPUT: Return VALID JSON ONLY conforming to 'output\_schema'. No extra commentary.",
"output\_schema": {
"type": "object",
"required": \[
"show\_uid",
"display\_name",
"event\_uid",
"slug",
"timezone",
"created\_date",
"last\_updated",
"meta",
"derived",
"search",
"aliases",
"ops",
"quick\_notes",
"suggested\_save",
"admin\_preview"
],
"properties": {
"show\_uid": { "type": "string" },
"display\_name": { "type": "string", "description": "Human display; typically the official full name" },
"event\_uid": { "type": "string" },
"slug": { "type": "string" },
"timezone": { "type": "string" },
"created\_date": { "type": "string" },
"last\_updated": { "type": "string" },
"meta": {
"type": "object",
"required": \[
"official\_link",
"official\_name",
"official\_start\_date",
"official\_end\_date",
"venue\_name",
"venue\_address",
"venue\_city",
"venue\_state",
"venue\_zip",
"venue\_coords",
"notes",
"sources"
],
"properties": {
"official\_link": { "type": "string" },
"official\_name": { "type": "string" },
"official\_start\_date": { "type": "string" },
"official\_end\_date": { "type": "string" },
"venue\_name": { "type": "string" },
"venue\_address": { "type": "string" },
"venue\_city": { "type": "string" },
"venue\_state": { "type": "string" },
"venue\_zip": { "type": "string" },
"venue\_coords": {
"type": "object",
"required": \["lat", "lon", "coordinate\_source"],
"properties": {
"lat": { "type": "number" },
"lon": { "type": "number" },
"coordinate\_source": { "type": "string" },
"google\_place\_id": { "type": \["string", "null"] },
"maps\_url": { "type": \["string", "null"] }
}
},
"notes": { "type": "string" },
"sources": { "type": "array", "items": { "type": "string" }, "minItems": 1 }
}
},
"derived": {
"type": "object",
"required": \["yyyymm", "month\_name", "season", "status\_window"],
"properties": {
"yyyymm": { "type": "string" },
"month\_name": { "type": "string" },
"season": { "type": "string", "enum": \["winter", "spring", "summer", "fall"] },
"status\_window": { "type": "string", "enum": \["upcoming", "active", "past"] }
}
},
"search": {
"type": "object",
"required": \["auto\_keys", "curated\_keys", "facets"],
"properties": {
"auto\_keys": { "type": "array", "items": { "type": "string" } },
"curated\_keys": { "type": "array", "items": { "type": "string" } },
"facets": {
"type": "object",
"required": \["discipline", "rating", "state", "region", "airports\_primary", "season"],
"properties": {
"discipline": { "type": \["string", "null"] },
"rating": { "type": \["string", "null"] },
"state": { "type": \["string", "null"] },
"region": { "type": \["string", "null"] },
"airports\_primary": { "type": "array", "items": { "type": "string" } },
"season": { "type": "string" }
}
}
}
},
"aliases": {
"type": "object",
"required": \["curated"],
"properties": {
"curated": {
"type": "array",
"items": {
"type": "object",
"required": \["type", "value", "status"],
"properties": {
"type": { "type": "string" },
"value": { "type": "string" },
"added\_by": { "type": \["string", "null"] },
"added\_on": { "type": \["string", "null"] },
"status": { "type": "string", "enum": \["active", "retired"] }
}
}
}
}
},
"ops": {
"type": "object",
"required": \["needs\_meta\_refresh", "needs\_research", "needs\_blog", "last\_ops\_check", "stale\_reason"],
"properties": {
"needs\_meta\_refresh": { "type": "boolean" },
"needs\_research": { "type": "boolean" },
"needs\_blog": { "type": "boolean" },
"last\_ops\_check": { "type": "string" },
"stale\_reason": { "type": \["string", "null"] }
}
},
"quick\_notes": { "type": "array", "items": { "type": "string" } },
"suggested\_save": {
"type": "object",
"required": \["file\_path", "download\_name"],
"properties": {
"file\_path": { "type": "string" },
"download\_name": { "type": "string" }
}
},
"admin\_preview": {
"type": "object",
"required": \["root", "paths"],
"properties": {
"root": { "type": "string" },
"paths": { "type": "array", "items": { "type": "string" } }
}
}
}
},
"example\_run\_inputs": {
"official\_link": "[https://www.ushja.org/programs/ihdc/championship](https://www.ushja.org/programs/ihdc/championship)",
"official\_name": "Platinum Performance/USHJA International Hunter Derby Championship",
"official\_start\_date": "2025-08-15"
},
"delivery\_notes": \[
"Return JSON only; no prose or comments.",
"Prefer organizer and venue sites; include only URLs you actually consulted in meta.sources.",
"If a required field cannot be verified, set it to null and explain briefly in quick\_notes and meta.notes.",
"Always include suggested\_save and admin\_preview with {show\_uid} substituted."
]
}
