{
"instruction": "ADD_SHOW_META_FROM_MINIMUM_FIELDS",
"description": "Single-shot prompt that takes the 3 required fields, validates them, lightly researches authoritative sources, derives search keys/facets, and returns a ready-to-save, downloadable JSON meta file (with {quick-notes}).",
"required_inputs": [
"official_link",
"official_name",
"official_start_date"
],
"prompt_template": "You are an operations editor for Clear Round Travel. INPUTS: official_link={official_link}, official_name={official_name}, official_start_date={official_start_date}. TASKS: (1) Validate the link resolves (organizer’s canonical page), the on-page name matches or reasonably aligns with official_name, and the date is a valid ISO date. (2) From authoritative sources (organizer page first, venue page second), enrich: official_end_date, venue_name, venue_address, venue_city, venue_state, venue_zip, venue_coords (WGS84 lat/lon; pick the main competitor entrance), timezone (IANA), sources (short list of URLs actually used), and a concise notes string for clarifications. (3) Generate IDs: stable series_uid (e.g., khp-derby-001) and event_uid = {series_uid}_{yyyy-mm} from official_start_date; choose a human slug (lowercase hyphenated). Create rid (opaque ULID/UUID). (4) Derive fields: yyyymm, month_name, season (NA: winter=Dec–Feb, spring=Mar–May, summer=Jun–Aug, fall=Sep–Nov), status_window (upcoming|active|past vs today). (5) Build search: auto_keys (normalized tokens from name, city/state, venue, airports, discipline/rating, year/month), curated_keys (leave empty unless obviously useful), facets (discipline, rating, state, region if known, airports_primary [1–3 IATA], season). (6) Aliases: add curated aliases only if clear (official, short); else return an empty list. (7) Ops flags: initialize needs_meta_refresh=false, needs_research=false, needs_blog=false, last_ops_check=today, stale_reason=null. (8) Add quick_notes: short bullet-style strings that highlight any uncertain or provisional facts (e.g., end date inferred). (9) Set created_date (today if new) and last_updated (today). OUTPUT: Return VALID JSON ONLY, matching output_schema. Include no commentary outside JSON. Also include a suggested file_path using file_naming.path_template and a download_name.",
"file_naming": {
"path_template": "/shows/{slug}/events/{yyyy-mm}/meta.json",
"download_name": "meta-{event_uid}.json"
},
"output_schema": {
"type": "object",
"required": ["rid", "series_uid", "event_uid", "slug", "timezone", "created_date", "last_updated", "meta", "derived", "search", "aliases", "ops", "quick_notes", "suggested_save"],
"properties": {
"rid": { "type": "string" },
"series_uid": { "type": "string" },
"event_uid": { "type": "string" },
"slug": { "type": "string" },
"timezone": { "type": "string" },
"created_date": { "type": "string", "description": "ISO date YYYY-MM-DD" },
"last_updated": { "type": "string", "description": "ISO date YYYY-MM-DD" },
"meta": {
"type": "object",
"required": ["official_link", "official_name", "official_start_date", "official_end_date", "venue_name", "venue_address", "venue_city", "venue_state", "venue_zip", "venue_coords", "notes", "sources"],
"properties": {
"official_link": { "type": "string" },
"official_name": { "type": "string" },
"official_start_date": { "type": "string" },
"official_end_date": { "type": "string" },
"venue_name": { "type": "string" },
"venue_address": { "type": "string" },
"venue_city": { "type": "string" },
"venue_state": { "type": "string" },
"venue_zip": { "type": "string" },
"venue_coords": {
"type": "object",
"required": ["lat", "lon", "coordinate_source"],
"properties": {
"lat": { "type": "number" },
"lon": { "type": "number" },
"coordinate_source": { "type": "string", "description": "e.g., organizer map, gmaps" },
"google_place_id": { "type": ["string", "null"] },
"maps_url": { "type": ["string", "null"] }
}
},
"notes": { "type": "string" },
"sources": { "type": "array", "items": { "type": "string" }, "minItems": 1 }
}
},
"derived": {
"type": "object",
"required": ["yyyymm", "month_name", "season", "status_window"],
"properties": {
"yyyymm": { "type": "string" },
"month_name": { "type": "string" },
"season": { "type": "string", "enum": ["winter", "spring", "summer", "fall"] },
"status_window": { "type": "string", "enum": ["upcoming", "active", "past"] }
}
},
"search": {
"type": "object",
"required": ["auto_keys", "curated_keys", "facets"],
"properties": {
"auto_keys": { "type": "array", "items": { "type": "string" } },
"curated_keys": { "type": "array", "items": { "type": "string" } },
"facets": {
"type": "object",
"required": ["discipline", "rating", "state", "region", "airports_primary", "season"],
"properties": {
"discipline": { "type": ["string", "null"] },
"rating": { "type": ["string", "null"] },
"state": { "type": ["string", "null"] },
"region": { "type": ["string", "null"] },
"airports_primary": { "type": "array", "items": { "type": "string" } },
"season": { "type": "string" }
}
}
}
},
"aliases": {
"type": "object",
"required": ["curated"],
"properties": {
"curated": {
"type": "array",
"items": {
"type": "object",
"required": ["type", "value", "status"],
"properties": {
"type": { "type": "string", "description": "official|short|venue|redirect|nickname|misspelling" },
"value": { "type": "string" },
"added_by": { "type": ["string", "null"] },
"added_on": { "type": ["string", "null"] },
"status": { "type": "string", "enum": ["active", "retired"] }
}
}
}
}
},
"ops": {
"type": "object",
"required": ["needs_meta_refresh", "needs_research", "needs_blog", "last_ops_check", "stale_reason"],
"properties": {
"needs_meta_refresh": { "type": "boolean" },
"needs_research": { "type": "boolean" },
"needs_blog": { "type": "boolean" },
"last_ops_check": { "type": "string" },
"stale_reason": { "type": ["string", "null"] }
}
},
"quick_notes": { "type": "array", "items": { "type": "string" } },
"suggested_save": {
"type": "object",
"required": ["file_path", "download_name"],
"properties": {
"file_path": { "type": "string", "description": "Use file_naming.path_template" },
"download_name": { "type": "string" }
}
}
}
},
"example_run_inputs": {
"official_link": "https://www.ushja.org/programs/ihdc/championship
",
"official_name": "USHJA International Hunter Derby Championship",
"official_start_date": "2025-08-15"
},
"delivery_notes": [
"Return JSON only; no prose. If any required field cannot be verified, set it to null and add a brief explanation to quick_notes and meta.notes.",
"Use organizer and venue sites as primary sources; include the exact URLs used in meta.sources.",
"Make the response directly downloadable by supplying suggested_save.file_path and download_name per file_naming."
]
}