<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="canonical" id="canonical">
<title id="title">Insider Guide</title>
<meta name="description" id="meta-desc" content="">
<meta property="og:title" id="og-title" content="">
<meta property="og:description" id="og-desc" content="">
<meta property="og:image" id="og-image" content="">
<meta property="og:type" content="article">
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.5;margin:0;padding:0 16px 48px;color:#111}
  header,section{max-width:820px;margin:24px auto}
  h1{font-size:1.8rem;margin:24px 0 8px}
  h2{font-size:1.3rem;margin:20px 0 8px}
  .hero{margin-top:16px}
  .cta{font-weight:600;margin-top:8px}
  .muted{color:#555}
  ul{padding-left:18px}
  a{color:#0a58ca;text-decoration:none} a:hover{text-decoration:underline}
</style>
</head>
<body>
<header>
  <h1 id="h1">Insider Guide</h1>
  <img id="hero" class="hero" alt="">
</header>

<section id="intro"></section>

<section id="stay">
  <h2>Where to Stay</h2>
  <p id="stay-p"></p>
  <ul id="stay-list"></ul>
  <p id="stay-cta" class="cta"></p>
</section>

<section id="dine">
  <h2>Dine</h2>
  <p><strong>AM:</strong> <span id="dine-am"></span></p>
  <p><strong>Dinner:</strong> <span id="dine-dinner"></span></p>
  <p id="dine-cta" class="cta"></p>
</section>

<section id="locale">
  <h2>Locale — Off-Barn</h2>
  <p id="locale-p"></p>
</section>

<section id="essentials">
  <h2>Essentials</h2>
  <p id="essentials-p"></p>
  <ul id="essentials-list"></ul>
  <p id="essentials-cta" class="cta"></p>
</section>

<section id="outro">
  <h2 class="muted">—</h2>
  <p id="outro-p"></p>
</section>

<script>
(async function(){
  const base = location.pathname.replace(/\/index\.html?$/,'');
  const contentUrl = base + '/capc-blog-2025-10-02.json';
  const assetsUrl  = base + '/assets.json';

  const [content, assets] = await Promise.all([
    fetch(contentUrl).then(r=>r.json()),
    fetch(assetsUrl).then(r=>r.json())
  ]);

  // SEO + head
  const seo = content.seo || {};
  document.getElementById('title').textContent = seo.search_title || 'Insider Guide';
  document.getElementById('meta-desc').setAttribute('content', seo.meta_description || '');
  document.getElementById('og-title').setAttribute('content', seo.open_graph_title || seo.search_title || '');
  document.getElementById('og-desc').setAttribute('content', seo.open_graph_description || seo.meta_description || '');
  document.getElementById('canonical').setAttribute('href', location.href.replace(/index\.html?$/,''));
  document.getElementById('og-image').setAttribute('content', (assets.hero && assets.hero.src) || '');

  // Hero
  const hero = document.getElementById('hero');
  hero.src = (assets.hero && assets.hero.src) || '';
  hero.alt = (assets.hero && assets.hero.alt) || 'Hero image';

  // Title H1
  const eventName = (content.meta && content.meta.event_name) || (seo.open_graph_title || 'Insider Guide');
  document.getElementById('h1').textContent = eventName;

  // Intro/Outro
  document.getElementById('intro').innerHTML = '<p>'+ (content.hello?.intro || '') +'</p>';
  document.getElementById('outro-p').textContent = content.hello?.outro || '';

  // Stay
  document.getElementById('stay-p').textContent = content.stay?.paragraph || '';
  (content.stay?.items || []).forEach(it=>{
    const li=document.createElement('li');
    if(it.url){ li.innerHTML = '<a rel="noopener nofollow external" target="_blank" href="'+it.url+'">'+(it.name||'')+'</a>' + (it.alt? ' — <span class="muted">'+it.alt+'</span>':''); }
    else { li.textContent = it.name || ''; }
    document.getElementById('stay-list').appendChild(li);
  });
  document.getElementById('stay-cta').textContent = content.stay?.cta || '';

  // Dine
  document.getElementById('dine-am').textContent = content.dine?.am || '';
  document.getElementById('dine-dinner').textContent = content.dine?.dinner || '';
  document.getElementById('dine-cta').textContent = content.dine?.cta || '';

  // Essentials
  document.getElementById('essentials-p').textContent = content.essentials?.paragraph || '';
  (content.essentials?.items || []).forEach(it=>{
    const li=document.createElement('li');
    if(it.url){ li.innerHTML = '<a rel="noopener nofollow external" target="_blank" href="'+it.url+'">'+(it.name||'')+'</a>' + (it.alt? ' — <span class="muted">'+it.alt+'</span>':''); }
    else { li.textContent = it.name || ''; }
    document.getElementById('essentials-list').appendChild(li);
  });
  document.getElementById('essentials-cta').textContent = content.essentials?.cta || '';
})();
</script>
</body>
</html>

