<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Blogs</title><link rel="canonical" href="https://blog.clearroundtravel.com/blogs/">
<script src="https://cdn.tailwindcss.com"></script>
</head><body class="bg-white text-gray-900">
<main class="max-w-5xl mx-auto px-4 py-10">
  <h1 class="text-3xl font-semibold mb-6">Blogs</h1>
  <div class="mb-4 flex gap-3 items-end">
    <div><label class="text-sm">Year</label><select id="year" class="border rounded px-2 py-1"><option value="">All</option></select></div>
    <div><label class="text-sm">Season</label><select id="season" class="border rounded px-2 py-1"><option value="">All</option><option>Winter</option><option>Spring</option><option>Summer</option><option>Fall</option></select></div>
    <div><label class="text-sm">Venue</label><input id="venue" class="border rounded px-2 py-1" placeholder="e.g., capc"></div>
  </div>
  <div id="recent" class="mb-6"></div>
  <div id="list" class="grid gap-6 md:grid-cols-2"></div>
</main>
<script>
fetch('./manifest.json').then(r=>r.json()).then(posts=>{
  const ys=[...new Set(posts.map(p=>p.year).filter(Boolean))].sort((a,b)=>b-a);
  const sel=document.getElementById('year'); ys.forEach(y=>{const o=document.createElement('option');o.value=y;o.textContent=y;sel.appendChild(o)});
  const season=document.getElementById('season'); const venue=document.getElementById('venue');
  const list=document.getElementById('list'); const recent=document.getElementById('recent');

  const card=(p)=>`<a href="${p.path}" class="block border rounded-2xl p-4 hover:shadow">
    ${p.image?`<img src="${p.image}" alt="" class="w-full h-40 object-cover rounded-xl mb-3">`:``}
    <div class="text-sm text-gray-600">${p.date||''}</div>
    <h2 class="text-xl font-medium">${p.title||p.slug}</h2>
    <div class="mt-2 text-xs text-gray-500">${[p.season,p.venue,p.state].filter(Boolean).join(" â€¢ ")}</div>
  </a>`;

  const render=()=>{
    const fy=sel.value, fs=season.value, fv=venue.value.trim().toLowerCase();
    let data=[...posts];
    if(fy) data=data.filter(p=>String(p.year)===fy);
    if(fs) data=data.filter(p=>p.season===fs);
    if(fv) data=data.filter(p=>(p.venue||'').toLowerCase().includes(fv));
    data.sort((a,b)=>(b.date||'').localeCompare(a.date||''));
    list.innerHTML=data.map(card).join('');

    const rec=[...posts].sort((a,b)=>(b.date||'').localeCompare(a.date||'')).slice(0,4);
    recent.innerHTML = `<div class="text-sm text-gray-600 mb-2">Recent</div>
      <div class="grid gap-4 md:grid-cols-4">${rec.map(p=>`<a href="${p.path}" class="block text-sm underline">${p.title||p.slug}</a>`).join('')}</div>`;
  };
  sel.onchange=render; season.onchange=render; venue.oninput=render; render();
});
</script>
</body></html>
