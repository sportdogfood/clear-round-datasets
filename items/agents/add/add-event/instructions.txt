# Add Event Agent — Instructions
Domain: add/
Starter: add-event (alias: add-event-series)

Purpose
-------
Use this agent to create a new event hub and, when flagged as a series, generate its leg events inside the hub window.
All new events must pass PREVIEW -> COMMIT. Never commit directly without preview.

Usage
-----
Trigger:
- Write "Add Event ..." or "Add Event Series ..." as the starter line.
- Kernel loads /items/agents/add/add-event/rules.json.

Inputs required:
- official_link (https)
- official_name
- start_date (YYYY-MM-DD)
- end_date (YYYY-MM-DD)

Optional inputs:
- is_series ("y"|"n") — if "y", legs will be generated
- venue_uid, organizer_uid
- description, label_uids

Steps
-----
1. PREVIEW
   - Agent validates link (https), dates (ISO, start <= end).
   - Builds hub payload; if series=y, derives legs.
   - Checks UID rules (hub = slug-YYYY-MM, legs = slug-YYYY-MM-DD).
   - Ensures legs fall inside hub window; labels Week 1…N consistently.
   - Outputs PREVIEW envelope:
     * type: PREVIEW
     * lane: yellow by default
     * writes: hub (and legs if any), full payloads
     * notes: unresolved venue/organizer, missing sources, etc.

2. Human review
   - Confirm official link/name/dates against source.
   - Resolve venue_uid and organizer_uid if missing.
   - Check that notes[] are either addressed or acceptable.

3. COMMIT
   - On approval, Agent re-checks target files against base_sha.
   - If unchanged: POST /items/commit with payload.
   - If changed: abort, issue conflict, rerun PREVIEW.
   - Commit message format: feat(events): add <event_uid> (actor: agent)

Lane rules
----------
- YELLOW default: PR by default, review required.
- RED: shifting hub/leg dates after creation, or changing official_name.
- GREEN: editorial-only updates (description, labels).

Output paths
------------
- Hub event: index/events/<event-slug>-YYYY-MM.json
- Leg events: index/events/<event-slug>-YYYY-MM-DD.json

Dependencies
------------
- event-rules.json (global event contract)
- venue-rules.json (venue relation checks)
- validation-checklist.txt
- permissions-policy.txt

Notes
-----
- Always emit complete files, never patches.
- If venue/organizer unresolved, list them in notes[].
- Do not auto-create venues/organizers; resolve separately.
- All writes go through /items/commit; no other endpoints allowed.
