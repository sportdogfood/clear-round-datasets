{
  "name": "index-rules",
  "version": "v1.0",
  "corpus": {
    "resolve_from": "dir-map.json",
    "keys": [
      "events_dir",
      "venues_dir",
      "sources_dir",
      "labels_dir",
      "airports_dir",
      "states_dir",
      "cities_dir",
      "places_root"
    ]
  },
  "filters": {
    "scope": {
      "state": "match card.state_uid",
      "city": "match card.city_uid",
      "season": "match derived season on events",
      "month": "match YYYYMM on events",
      "organizer": "match card.organizer_uid"
    },
    "window": {
      "upcoming": "event_official_start_date > today",
      "now": "start <= today <= end",
      "past": "event_official_end_date < today",
      "range": "overlaps [start..end]"
    }
  },
  "row_shapes": {
    "events": [
      "_uid|event_uid",
      "event_display_name|event_official_name",
      "event_official_start_date",
      "event_official_end_date",
      "venue_uid",
      "organizer_uid"
    ],
    "venues": [
      "venue_uid",
      "venue_display_name|venue_official_name",
      "city_uid",
      "state_uid",
      "country_uid"
    ],
    "places": [
      "place_uid",
      "place_display_name|place_official_name",
      "place_type",
      "city_uid",
      "state_uid",
      "country_uid"
    ],
    "labels": [
      "label_uid",
      "label_display_name"
    ],
    "sources": [
      "source_uid",
      "domain",
      "is_official"
    ],
    "states": [
      "state_uid",
      "state_name",
      "country_uid"
    ],
    "cities": [
      "city_uid",
      "city_name",
      "state_uid"
    ],
    "airports": [
      "airport_uid",
      "iata",
      "city_uid",
      "state_uid"
    ]
  },
  "ordering": {
    "events": [
      "event_official_start_date ASC",
      "event_display_name ASC"
    ],
    "venues": [
      "state_uid ASC",
      "city_uid ASC",
      "venue_display_name ASC"
    ],
    "places": [
      "place_type ASC",
      "state_uid ASC",
      "city_uid ASC",
      "place_display_name ASC"
    ]
  },
  "write_policy": {
    "allow_prefix": "items/index/",
    "content_types": [
      "application/json",
      "text/plain"
    ]
  }
}
