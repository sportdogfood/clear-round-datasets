{
"version": "v1.0",
"lane": "research_stay",
"dirs": { "items_root": "items/stay", "path_template": "items/stay/{hub_uid}/", "filenames": { "curated": "curated.json", "review": "review.json", "essentials": "essentials.json" }, "filename_equals_uid": false },
"policy": { "providers": ["google","yelp","osm"], "https_only": true, "idempotent_commits": true, "write_requires_summary": true },
"schemas": {
"input_hub": { "hub_uid": "string", "venue_uid": "string", "center": { "lat": "number", "lng": "number" }, "locale_uid": "string", "walkable_m": "number", "short_drive_m": "number" },
"output_row": { "source_provider": "string", "source_place_id": "string", "name": "string", "property_type": "string|null", "brand": "string|null", "loyalty_programs": "array|null", "price_tier": "string|null", "resort_fee": "number|null", "cancellation_window_days": "number|null", "points_eligible": "boolean|null", "pet_friendly": "boolean|null", "pet_fee": "number|null", "parking_for_rigs": "boolean|null", "parking_notes": "string|null", "breakfast_included": "boolean|null", "kitchenette": "boolean|null", "laundry": "boolean|null", "rating": "number|null", "reviews": "number|null", "website": "string|null", "phone": "string|null", "formattedAddress": "string|null", "distance_m": "number|null", "distance_bucket": "string|null", "bucket": "string|null", "flags": "object|null", "score": "number", "confidence": "string", "confidence_reasons": "string", "types": "array|null", "primaryType": "string|null" },
"essentials": { "hub_uid": "string", "updated": "string", "buckets": "array", "top_picks": "array", "summary": "object" }
},
"defaults": {
"fetch": {
"google": { "search_mode": "nearby", "rankPreference": "POPULARITY", "maxResultCount": 20, "includedPrimaryTypes": ["lodging","hotel","motel","campground","rv_park"], "includedTypes": ["lodging","campground","rv_park"], "field_mask_search": ["id","displayName","primaryType","types","rating","userRatingCount","websiteUri","formattedAddress"], "details_for_place_ids": "y", "field_mask_details": ["id","formattedAddress","nationalPhoneNumber","priceLevel","reservable","goodForGroups","goodForKids"] },
"yelp": { "enable": "y", "fields": ["price","categories","rating","review_count","url"] },
"osm": { "enable": "y", "tags": ["tourism=hotel","tourism=motel","tourism=apartment","tourism=guest_house","tourism=camp_site","tourism=caravan_site"], "fields": ["name","website","phone"] }
},
"knobs": {
"dedupe": { "by": ["place_id","name"], "name_fuzzy": "y", "same_location_threshold_m": 75 },
"filters": { "min_rating": 4.0, "min_reviews": 40, "include_types": [], "exclude_types": [] },
"derive": {
"property_type": { "from": ["primaryType","types","yelp.categories","osm.tags"], "map_tokens": { "hotel": ["hotel","lodging"], "motel": ["motel"], "extended_stay": ["apartment","aparthotel","suite"], "bnb_guesthouse": ["guest_house","bed_and_breakfast"], "campground": ["campground","camp_site"], "rv_park": ["rv_park","caravan_site"] }, "label_case": "lower" },
"price_tier": { "from": ["priceLevel","yelp.price"], "map_numeric": ["$","$$","$$$","$$$$","$$$$$"] },
"bucket": { "strategy": "property_then_distance", "special_types": { "Walkable": [], "<10-min drive": [] } }
},
"distance": { "enable": "y", "center_from": "hub.center", "walkable_m_from": "hub.walkable_m", "short_drive_m_from": "hub.short_drive_m", "output_field": "distance_m", "bucket_field": "distance_bucket" },
"scoring": { "formula": "rating_log_reviews", "weights": { "rating": 1.0, "log_reviews": 1.0, "proximity_bonus": 0.35, "flags_bonus": 0.4 }, "flag_weights": { "parking_for_rigs": 0.4, "pet_friendly": 0.2, "breakfast_included": 0.15, "kitchenette": 0.15 }, "round_to": 3 },
"confidence": { "signals": { "has_property_type": true, "has_price": true, "rating_ge": 4.2, "reviews_ge": 100, "has_website": true }, "tiers": { "high_min": 3, "medium_min": 2 } },
"split": { "curated_if": { "confidence_in": ["high","medium"], "require_one_of": ["property_type","website"] }, "review_else": true, "review_checklist": [ { "when_missing": "resort_fee", "action": "add resort_fee" }, { "when_missing": "cancellation_window_days", "action": "confirm cancellation window" }, { "when_missing": "parking_for_rigs", "action": "confirm rig parking" }, { "when_missing": "pet_friendly", "action": "confirm pet policy" } ] },
"output": { "format": "arrays", "fields": { "order": ["source_provider","source_place_id","name","property_type","brand","loyalty_programs","price_tier","resort_fee","cancellation_window_days","points_eligible","pet_friendly","pet_fee","parking_for_rigs","parking_notes","breakfast_included","kitchenette","laundry","rating","reviews","website","phone","formattedAddress","distance_m","distance_bucket","bucket","score","confidence","confidence_reasons","types","primaryType","flags"], "rename": { "source_place_id": "place_id", "userRatingCount": "reviews" }, "omit_nulls": true }, "deliver": { "curated_key": "curated", "review_key": "review", "essentials_key": "essentials", "include_summary": "y", "include_meta": "y" } }
}
},
"commit": { "stash": { "folder": "items/stay/{hub_uid}/", "filenames": { "curated": "curated.json", "review": "review.json", "essentials": "essentials.json" } }, "write": { "enabled": "n", "message_tmpl": "feat(stay): curate {hub_uid}" } },
"created": "2025-09-15T00:00:00Z", "last_updated": "2025-09-15T00:00:00Z"
}
