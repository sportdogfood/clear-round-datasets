{
  "version": "1.1.0",
  "tiers_allowed": ["fei", "a-circuit", "regional", "local", "unknown"],
  "sources": [
    {
      "id": "csv_override",
      "url": "",
      "role": "csv_override",
      "priority": 0,
      "match_rule": "^{{event_uid}}$",
      "rating_tokens": [],
      "notes": "CSV rows map by event_uid and override other sources. Provide event_uid and tier (one of tiers_allowed) and confidence."
    },
    {
      "id": "event_official",
      "url": "{event_official_url}",
      "role": "official",
      "priority": 1,
      "match_rule": "hostname_match",
      "rating_tokens": ["FEI", "CSI", "A-circuit", "A-rated", "Grand Prix", "USEF", "USHJA"],
      "notes": "Primary authoritative signal. Accept tokens only if verbatim present on page."
    },
    {
      "id": "venue_json",
      "url": "https://crt-b1434e13de34.herokuapp.com/items/venues/{venue_uid}.json",
      "role": "internal",
      "priority": 1,
      "match_rule": "path_contains_venues",
      "rating_tokens": ["a-circuit", "priority_tag", "venue_rating_tag"],
      "notes": "Internal venue JSON may carry explicit rating tags. Do not infer tier from unrelated counts."
    },
    {
      "id": "fei_registry",
      "url": "https://www.fei.org/",
      "role": "registry",
      "priority": 2,
      "match_rule": "fei|fei.org",
      "rating_tokens": ["FEI", "CSI"],
      "notes": "High-confidence FEI signals."
    },
    {
      "id": "usef_ushja_registry",
      "url": "https://www.usef.org/ or https://www.ushja.org/",
      "role": "registry",
      "priority": 2,
      "match_rule": "usef|ushja",
      "rating_tokens": ["USEF", "USHJA", "A-circuit", "national"],
      "notes": "National registry signals mapped to a-circuit when explicit."
    },
    {
      "id": "equestrian_press",
      "url": "https://www.chronofhorse.com/",
      "role": "press",
      "priority": 3,
      "match_rule": "chronofhorse|localnews|press",
      "rating_tokens": ["Grand Prix", "major class", "finals", "featured"],
      "notes": "Corroborate prominence. Use only explicit mentions."
    }
  ],
  "token_mapping": {
    "FEI": { "tier": "fei", "confidence": "high" },
    "CSI": { "tier": "fei", "confidence": "high" },
    "A-circuit": { "tier": "a-circuit", "confidence": "high" },
    "A-rated": { "tier": "a-circuit", "confidence": "high" },
    "USEF": { "tier": "a-circuit", "confidence": "medium", "sanctions": ["USEF"] },
    "USHJA": { "tier": "a-circuit", "confidence": "medium", "sanctions": ["USHJA"] },
    "Grand Prix": { "tier": "a-circuit", "confidence": "medium", "signal": "major_class" },
    "major class": { "tier": "regional", "confidence": "low" },
    "featured": { "tier": "regional", "confidence": "low" }
  },
  "behavior": {
    "priority_order": "ascending (0 = highest)",
    "rules": [
      "CSV override (priority 0) wins and must use only tiers in tiers_allowed.",
      "Check priority-1 sources next. Only accept explicit tokens found on page/JSON.",
      "Registries (priority 2) supply high-confidence matches for FEI/CSI or A-circuit labels.",
      "Press (priority 3) used for corroboration only; do not elevate tier unless paired with registry/official signals.",
      "If no explicit token found set tier='unknown' and confidence='low'."
    ]
  },
  "output_fields": [
    "event.rating.tier",
    "event.rating.sanctions[]",
    "event.rating.score",
    "event.rating.reviews_count",
    "event.rating.confidence",
    "event.rating.source"
  ],
  "notes": "This file restricts detection to the specified tiers. Update CSV overrides for deterministic overrides. Runner must emit source_trace entries for every attempted source with url, http_status, extracted_tokens, and mapped rating_signal."
}
