{
  "version": "1.2.0",
  "tiers_allowed": ["fei", "a-circuit", "regional", "local", "unknown"],
  "sources": [
    {
      "id": "event_official",
      "url": "{event_official_url}",
      "role": "official",
      "priority": 1,
      "match_rule": "hostname_match",
      "rating_tokens": ["FEI", "CSI", "A-circuit", "A-rated", "USEF", "USHJA", "Grand Prix"],
      "notes": "Primary: check event.official_url. Accept only explicit tokens present on the page."
    },
    {
      "id": "fei_registry",
      "url": "https://www.fei.org/",
      "role": "registry",
      "priority": 2,
      "match_rule": "fei|fei.org",
      "rating_tokens": ["FEI", "CSI"],
      "notes": "Check FEI calendar/listings for explicit FEI/CSI labels."
    },
    {
      "id": "usef_registry",
      "url": "https://www.usef.org/",
      "role": "registry",
      "priority": 3,
      "match_rule": "usef|usef.org",
      "rating_tokens": ["USEF", "A-circuit", "A-rated"],
      "notes": "Check USEF listings for explicit national sanction labels."
    },
    {
      "id": "ushja_registry",
      "url": "https://www.ushja.org/",
      "role": "registry",
      "priority": 4,
      "match_rule": "ushja|ushja.org",
      "rating_tokens": ["USHJA", "A-circuit"],
      "notes": "Check USHJA listings as final registry fallback."
    }
  ],
  "token_mapping": {
    "FEI": { "tier": "fei", "confidence": "high" },
    "CSI": { "tier": "fei", "confidence": "high" },
    "A-circuit": { "tier": "a-circuit", "confidence": "high" },
    "A-rated": { "tier": "a-circuit", "confidence": "high" },
    "USEF": { "tier": "a-circuit", "confidence": "medium", "sanctions": ["USEF"] },
    "USHJA": { "tier": "a-circuit", "confidence": "medium", "sanctions": ["USHJA"] },
    "Grand Prix": { "tier": "a-circuit", "confidence": "medium", "signal": "major_class" }
  },
  "behavior": {
    "priority_order": "ascending (1 = first)",
    "rules": [
      "Check each source in order. For each source perform HEAD/GET and record source_trace entry with url, http_status, extracted_tokens.",
      "Accept only explicit rating tokens found on the source. Map token via token_mapping.",
      "Stop on first definitive token match and set event.rating accordingly.",
      "If no tokens found after all 4 sources set event.rating = null and event.rating.confidence = 'low'. Emit validation.warning stating all four sources were checked."
    ]
  },
  "output_fields": [
    "event.rating.tier",
    "event.rating.sanctions[]",
    "event.rating.score",
    "event.rating.reviews_count",
    "event.rating.confidence",
    "event.rating.source"
  ],
  "notes": "Drop to /ratings/ratings_sources.json. No CSV overrides. Runner must not infer beyond explicit tokens and must produce full source_trace for audit."
}
